var col = $('.waterfall .col:first');
<% @products.each do |product| %>
$.each($('.waterfall .col'), function(){
    if ($(this).height() < col.height()) {
        col = $(this);
    }
});
var item = $("<%= j render :partial => "products/item", :locals => {:product => product} %>");
item.hide().appendTo(col).fadeIn();
<% end %>
$('.pagination').html('<%= j paginate @products, :theme => 'bootstrap', :remote => true %>');